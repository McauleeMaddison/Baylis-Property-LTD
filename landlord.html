<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <meta name="description" content="Landlord portal for Baylis Property LTD – manage maintenance requests, engage with residents, oversee community communications." />
  <meta name="keywords" content="Baylis Property landlord, property management, maintenance requests, tenant communication" />
  <meta name="author" content="Baylis Property LTD" />
  <meta property="og:title" content="Landlord Portal • Baylis Property LTD" />
  <meta property="og:description" content="Manage your properties and residents with Baylis Property LTD's landlord portal." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://baylisproperty.co.uk/landlord.html" />
  <meta property="og:image" content="https://baylisproperty.co.uk/assets/logo.svg" />
  <meta name="twitter:card" content="summary" />
  <link rel="canonical" href="https://baylisproperty.co.uk/landlord.html" />

  <title>Landlord • Baylis Property LTD</title>

  <link rel="icon" href="assets/logo.svg" />
  <link rel="stylesheet" href="css/style.css" />
  <script src="js/api-base.js"></script>
  <script defer src="js/script.js"></script>
  <script defer src="js/landlord.js"></script>
  <link rel="prefetch" href="resident.html" />
</head>
<body class="page page--landlord" data-required-role="landlord" data-api-base="/api">
  <a class="skip-link" href="#content">Skip to main content</a>
  <header class="site-header" id="mainHeader">
    <nav class="nav" aria-label="Main">
      <div class="nav-inner container">
        <a class="logo" href="login.html" aria-label="Baylis Property LTD Home">
          <img src="assets/logo.png" alt="" width="26" height="26" />
          <span>Baylis Property LTD</span>
        </a>

        <button class="btn secondary hamb" aria-expanded="false" aria-controls="navLinks" aria-label="Toggle menu" data-hamb>☰</button>

        <div class="nav-links" id="navLinks" data-links data-open="false">
          <!-- Dashboard link removed (login required) -->
          <a href="resident.html" data-test="nav-resident">Resident</a>
          <a href="landlord.html" aria-current="page" data-test="nav-landlord">Landlord</a>
          <a href="community.html" data-test="nav-community">Community</a>
          <a href="profile.html" data-test="nav-profile">Profile</a>
          <a href="settings.html" data-test="nav-settings">Settings</a>
          <a href="login.html" data-test="nav-login">Login</a>
          <a href="register.html" data-test="nav-register">Register</a>
        </div>
      </div>
    </nav>
  </header>

  <main role="main" id="content" class="container" tabindex="-1" style="margin-top:1rem;">
    <header class="header">
      <h1 class="h1">Landlord</h1>
      <p class="muted">Welcome, <strong id="userWelcome">Landlord</strong>. Review requests, update statuses, and monitor community activity.</p>
    </header>

    <section class="dashboard-cards" aria-label="Overview metrics">
      <article class="dashboard-card" aria-labelledby="mOpen">
        <h3 id="mOpen">Open Requests</h3>
        <div class="metric" id="metricOpen">—</div>
        <p class="muted">Requests not yet started</p>
      </article>

      <article class="dashboard-card" aria-labelledby="mProg">
        <h3 id="mProg">In Progress</h3>
        <div class="metric" id="metricInProgress">—</div>
        <p class="muted">Work currently underway</p>
      </article>

      <article class="dashboard-card" aria-labelledby="mDone">
        <h3 id="mDone">Completed</h3>
        <div class="metric" id="metricDone">—</div>
        <p class="muted">Resolved and closed</p>
      </article>

      <article class="dashboard-card" aria-labelledby="mPosts">
        <h3 id="mPosts">Community Posts (7d)</h3>
        <div class="metric" id="metricPosts">—</div>
        <p class="muted">Recent resident updates</p>
      </article>
    </section>

    <section class="dashboard-card" aria-label="Tools" style="display:grid; gap:.75rem;">
      <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:.6rem; align-items:end;">
        <label for="reqSearch" class="field">
          <span>Search requests</span>
          <input id="reqSearch" type="search" placeholder="Search by name, issue or type…" inputmode="search" />
        </label>
        <label for="filterType" class="field">
          <span>Filter by type</span>
          <select id="filterType" title="Filter by type">
            <option value="all" selected>All types</option>
            <option value="cleaning">Cleaning</option>
            <option value="repair">Repair</option>
          </select>
        </label>
        <label for="filterStatus" class="field">
          <span>Filter by status</span>
          <select id="filterStatus" title="Filter by status">
            <option value="all" selected>All status</option>
            <option value="open">Open</option>
            <option value="in_progress">In Progress</option>
            <option value="done">Done</option>
          </select>
        </label>
      </div>
      <div style="display:flex; gap:.5rem; flex-wrap:wrap;">
        <button type="button" id="btnRefresh" class="btn btn-ghost">Refresh</button>
        <button type="button" id="btnExport" class="btn btn-ghost">Export CSV</button>
      </div>
    </section>

    <section class="dashboard-cards" aria-label="Requests">
      <article class="dashboard-card">
        <h3>Cleaning Requests</h3>
        <ul id="allCleaningRequests" class="submission-log" aria-live="polite">
          <li class="muted">Loading…</li>
        </ul>
      </article>

      <article class="dashboard-card">
        <h3>Repair Requests</h3>
        <ul id="allRepairRequests" class="submission-log" aria-live="polite">
          <li class="muted">Loading…</li>
        </ul>
      </article>
    </section>

    <section class="dashboard-card" aria-label="Community posts">
      <h3>Community Posts</h3>
      <ul id="allCommunityPosts" class="post-feed" aria-live="polite">
        <li class="muted">Loading…</li>
      </ul>
    </section>

    <section class="dashboard-card" aria-label="Security audit log">
      <div class="section-header" style="margin-bottom:var(--space-3);">
        <p class="eyebrow">Security events</p>
        <div style="display:flex; justify-content:space-between; align-items:center; gap:.5rem; flex-wrap:wrap;">
          <h3 style="margin:0;">Audit log</h3>
          <button type="button" id="auditRefreshBtn" class="btn btn-ghost btn-small">Refresh</button>
        </div>
        <p class="muted">Latest authentication and security events across the workspace.</p>
      </div>
      <div class="table-wrapper">
        <table class="table" aria-live="polite">
          <thead>
            <tr>
              <th scope="col">When</th>
              <th scope="col">Event</th>
              <th scope="col">Severity</th>
              <th scope="col">Details</th>
            </tr>
          </thead>
          <tbody id="auditTableBody">
            <tr><td colspan="4" class="muted" id="auditEmpty">Loading audit events…</td></tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <small>&copy; <span id="year"></span> Baylis Property LTD</small>
      <span class="dot">&middot;</span>
      <a href="community.html">Community</a>
      <span class="dot">&middot;</span>
      <a href="settings.html">Settings</a>
    </div>
  </footer>

  <style>
    .metric { font-size: 1.8rem; font-weight: 700; }
    .table-wrapper { overflow-x:auto; }
    #auditTableBody td { font-size: var(--fs-14); }
    .eyebrow { text-transform: uppercase; letter-spacing: .2em; font-size: .75rem; color: var(--secondary); }
  </style>
</body>
</html>
